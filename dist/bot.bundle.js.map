{"version":3,"sources":["webpack:///webpack/bootstrap e0b761f36b223544239c","webpack:///./src/index.js","webpack:///./src/app/app.js","webpack:///./src/app/config/app_settings.js","webpack:///./src/app/config/store/index.js","webpack:///./src/app/config/store/configStore.dev.js","webpack:///external \"redux\"","webpack:///external \"redux-thunk\"","webpack:///./src/app/config/reducers.js","webpack:///./src/app/areas/messages/reducer.js","webpack:///./src/app/areas/messages/actions.js","webpack:///./src/app/areas/games/reducer.js","webpack:///./src/app/areas/games/actions.js","webpack:///external \"underscore\"","webpack:///./src/app/common/services/index.js","webpack:///./src/app/common/services/slack-bot/slack-bot.js","webpack:///external \"botkit\"","webpack:///./src/app/common/services/db-service/db-service.js","webpack:///external \"mongodb\"","webpack:///./src/app/areas/players/actions.js","webpack:///./src/app/areas/status/actions.js","webpack:///./src/app/areas/status/reducer.js","webpack:///./src/app/config/store/configStore.prod.js","webpack:///./src/app/components/bot/index.js","webpack:///./src/app/common/services/game-service/game-service.js","webpack:///external \"shortid\"","webpack:///./src/app/components/ticker/ticker.js","webpack:///./src/app/components/bot/config.js","webpack:///./src/app/components/bot/command-handlers.js","webpack:///external \"assert\""],"names":[],"mappings":"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","file":"bot.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e0b761f36b223544239c\n **/","import App from './app/app'\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import AppSettings from './config/app_settings'\nimport setupStore from './config/store'\nimport RBot from './components/bot'\nimport { bootServices } from './common/services'\n\nvar MongoClient = require('mongodb').MongoClient\nvar assert = require('assert')\n\n/** Class representing app */\nclass App {\n\n  /**\n   * Initialize application\n   * @param  {Object} initialState - initial state passed to the app\n   */\n  constructor (initialState) {\n    this.store = setupStore({})\n    this.configureServices(AppSettings).then(() => {\n      console.log('Services booted, starting Ryszard')\n      this.bot = new RBot()\n    })\n  }\n\n  /**\n   * Initialize services with provided configuration\n   */\n  configureServices () {\n    console.log('Booting up services')\n    return bootServices(AppSettings.services)\n  }\n}\n\nvar app = new App()\n\nexport function getStore () {\n  return app.store\n}\n\nexport function getState () {\n  return app.store.getState()\n}\n\nexport function dispatch (action) {\n  return app.store.dispatch(action)\n}\n\nexport default app\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/app.js\n **/","export default {\n  paths: {\n    images: 'static/images',\n    fonts: 'static/fonts'\n  },\n  services: {\n    SlackBot: {\n      token: process.env.RBOT_SLACK_TOKEN,\n      enabled: true\n    },\n    Mongo: {\n      url: 'mongodb://localhost:27017/',\n      dbName: 'ryszard-dev',\n      enabled: false\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/config/app_settings.js\n **/","import storeDev from './configStore.dev'\nimport storeProd from './configStore.prod'\n\nif (process.env.NODE_ENV === 'development') {\n  module.exports = storeDev\n}\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = storeProd\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/config/store/index.js\n **/","import { createStore, applyMiddleware, compose } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport reducers from '../reducers'\n\nconst storeEnhancers = compose(applyMiddleware(thunkMiddleware))\n\nfunction setupStore (initialState) {\n  return createStore(reducers, initialState, storeEnhancers)\n}\n\nexport default setupStore\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/config/store/configStore.dev.js\n **/","module.exports = require(\"redux\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = require(\"redux-thunk\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux-thunk\"\n ** module id = 6\n ** module chunks = 0\n **/","import { combineReducers } from 'redux'\nimport { messages as messagesReducer } from '../areas/messages/reducer'\nimport { games as gamesReducer } from '../areas/games/reducer'\nimport { status as statusReducer } from '../areas/status/reducer'\n\nexport default combineReducers({\n  messages: messagesReducer,\n  games: gamesReducer,\n  status: statusReducer\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/config/reducers.js\n **/","/** @module messages/reducer */\n\n'use strict'\n\nimport * as messagesActions from './actions'\n\n/**\n * @todo Update state type and default value to reflect your model\n * @todo Implement reducer\n *\n * Messages reducer\n * @param  {[type]}  state  - current state to be reduced\n * @param  {Object} action - action to be performed on current state\n * @paraxm  {string} action.type - {@link ACTION_NAME|ACTION_NAME}, ...\n * @return {[type]} - array representing new state\n */\n\nexport function messages (state = [], action) {\n  switch (action.type) {\n    case messagesActions.RECEIVED_MESSAGE: {\n      return [...state, action.payload]\n    }\n    default:\n      return state\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/areas/messages/reducer.js\n **/","'use strict'\n\n/*=======================================\n=              Action types             =\n=======================================*/\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const RECEIVED_MESSAGE = 'RECEIVED_MESSAGE'\n\n/* =====  End of Action types  ======*/\n\n/*=======================================\n=            Action creators            =\n=======================================*/\n\n/** @module messages/actions */\n\n/**\n * @todo Implement action creators for this area\n *\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link RECEIVED_MESSAGE} action object\n */\nexport function receivedMessage (payload) {\n  return {\n    type: RECEIVED_MESSAGE,\n    payload\n  }\n}\n\n/* =====  End of Action creators  ====== */\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/areas/messages/actions.js\n **/","\n/** @module games/reducer */\n\nimport * as gamesActions from './actions'\nimport _ from 'underscore'\n\n/**\n * @todo Update state type and default value to reflect your model\n * @todo Implement reducer\n *\n * Games reducer\n * @param  {[type]}  state  - current state to be reduced\n * @param  {Object} action - action to be performed on current state\n * @param  {string} action.type - {@link ACTION_NAME|ACTION_NAME}, ...\n * @return {[type]} - array representing new state\n */\n\nexport function games (state = {}, action) {\n  var payload = action.payload\n  switch (action.type) {\n    case gamesActions.ADD_GAME: {\n      let nextState = Object.assign({}, state)\n\n      nextState[payload.id] = {\n        meta: {\n          channel: payload.channel,\n          organizer: payload.organizer,\n          createdAt: payload.createdAt\n        },\n        players: {\n          available: [],\n          pending: [],\n          accepted: [],\n          rejected: []\n        }\n      }\n\n      return nextState\n    }\n\n    case gamesActions.START_GAME: {\n      var nextState = Object.assign({}, state)\n      nextState[payload.gameId].meta.startedAt = payload.startedAt\n      return nextState\n    }\n\n    case gamesActions.UPDATE_PLAYERS: {\n      let nextState = Object.assign({}, state)\n      let players = Object.assign({}, nextState[payload.gameId].players, payload.players)\n      nextState[payload.gameId].players = players\n      return nextState\n    }\n    case gamesActions.RANDOMIZE_PLAYERS: {\n      let nextState = Object.assign({}, state)\n      let newPlayers = []\n      let playersLeft = []\n      let players = nextState[payload.gameId].players\n\n      _.each(payload.playerIds, (idx) => {\n        newPlayers.push(players.available[idx])\n      })\n\n      players.available = _.filter(players.available, (player, index) => {\n        return _.indexOf(payload.playerIds, index) === -1\n      })\n\n      players = Object.assign({}, players, {\n        available: players.available,\n        pending: newPlayers\n      })\n\n      nextState[payload.gameId].players = players\n\n      return nextState\n    }\n\n    case gamesActions.PLAYER_ACCEPTED: {\n      let nextState = Object.assign({}, state)\n      let game = nextState[payload.gameId]\n      let players = {\n        available: game.players.available,\n        pending: _.without(game.players.pending, payload.playerId),\n        accepted: _.union(game.players.accepted, [payload.playerId]),\n        rejected: game.players.rejected\n      }\n      nextState[payload.gameId].players = players\n      return nextState\n    }\n\n    case gamesActions.REMOVE_PLAYER: {\n      let nextState = Object.assign({}, state)\n      let game = nextState[payload.gameId]\n      console.log('remove')\n      console.log(game.players)\n      console.log('remove')\n      let players = Object.assign({}, {\n        available: game.players.available,\n        pending: _.without(game.players.pending, payload.playerId),\n        rejected: _.union(game.players.rejected, [payload.playerId]),\n        accepted: _.without(game.players.accepted, payload.playerId)\n      })\n      nextState[payload.gameId].players = players\n      return nextState\n    }\n\n    case gamesActions.GET_NEW_PLAYER: {\n      let nextState = Object.assign({}, state)\n      let game = nextState[payload.gameId]\n\n      var newPlayer = game.players.available[_.random(game.players.available.length - 1)]\n      console.log('newPlayer ============ ', newPlayer)\n      let players = Object.assign({\n        pending: _.union(game.players.pending, [newPlayer]),\n        available: _.without(game.players.available, newPlayer),\n        rejected: game.players.rejected,\n        accepted: game.players.accepted\n      })\n\n      console.log(players)\n      nextState[payload.gameId].players = players\n\n      return nextState\n    }\n\n    default:\n      return state\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/areas/games/reducer.js\n **/","import _ from 'underscore'\nimport Services from '../../common/services'\nimport * as playersActions from '../players/actions'\nimport * as gamesActions from '../games/actions'\nimport * as statusActions from '../status/actions'\n\n/*=======================================\n=              Action types             =\n=======================================*/\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const CREATE_GAME = 'CREATE_GAME'\n\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const ADD_GAME = 'ADD_GAME'\n\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const START_GAME = 'START_GAME'\n\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const CANCEL_GAME = 'CANCEL_GAME'\n\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const UPDATE_PLAYERS = 'UPDATE_PLAYERS'\n\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const RANDOMIZE_PLAYERS = 'RANDOMIZE_PLAYERS'\n\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const PLAYER_REJECTED = 'PLAYER_REJECTED'\n\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const PLAYER_ACCEPTED = 'PLAYER_ACCEPTED'\n\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const REMOVE_PLAYER = 'REMOVE_PLAYER'\n\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const GET_NEW_PLAYER = 'GET_NEW_PLAYER'\n\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const ADD_NEW_PLAYER = 'ADD_NEW_PLAYER'\n\n/* =====  End of Action types  ======*/\n\n/*=======================================\n=            Action creators            =\n=======================================*/\n\n/** @module games/actions */\n\n/**\n * @todo Implement action creators for this area\n *\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link ACTION_NAME} action object\n */\nexport function createGame (id, channel, organizer, ts, botId) {\n  return (dispatch, getState) => {\n    dispatch(addGame(id, channel, organizer, ts))\n    return new Promise((resolve, reject) => {\n      let context = Services.SlackBot.getContext(channel)\n\n      context.ctx.info({channel: channel}, (err, response) => {\n        if (err) {\n          reject(err)\n        }\n\n        dispatch(\n          updatePlayers(\n            id,\n            {\n              available: _.without(response[context.name].members, organizer, Services.SlackBot.id),\n              accepted: [organizer]\n            }\n          )\n        )\n\n        dispatch(\n          randomizePlayers(\n            id,\n            getRandomPlayersIds(response[context.name].members.length - 2)\n          )\n        )\n\n        dispatch(statusActions.updateStatus({\n          gameId: id,\n          status: 'pending'\n        }))\n\n        resolve(response)\n      })\n    })\n  }\n}\n\n/**\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link ACTION_NAME} action object\n */\nexport function addGame (id, channel, organizer, ts) {\n  return {\n    type: ADD_GAME,\n    payload: {\n      id: id,\n      channel: channel,\n      organizer: organizer,\n      createdAt: ts\n    }\n  }\n}\n\n/**\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link ACTION_NAME} action object\n */\nexport function startGame (gameId, ts) {\n  return {\n    type: START_GAME,\n    payload: {\n      gameId: gameId,\n      startedAt: ts\n    }\n  }\n}\n\n/**\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link CANCEL_GAME} action object\n */\nexport function cancelGame (organizerId) {\n  return {\n    type: CANCEL_GAME,\n    payload: {\n      organizerId: organizerId\n    }\n  }\n}\n\n/**\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link UPDATE_PLAYERS} action object\n */\nexport function updatePlayers (id, players) {\n  return {\n    type: UPDATE_PLAYERS,\n    payload: {\n      gameId: id,\n      players: players\n    }\n  }\n}\n\n/**\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link RANDOMIZE_PLAYERS} action object\n */\nexport function randomizePlayers (gameId, playerIds) {\n  return {\n    type: RANDOMIZE_PLAYERS,\n    payload: {\n      gameId: gameId,\n      playerIds: playerIds\n    }\n  }\n}\n\n/**\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link PLAYER_ACCEPTED} action object\n */\nexport function playerAccepted (gameId, playerId) {\n  return {\n    type: PLAYER_ACCEPTED,\n    payload: {\n      gameId: gameId,\n      playerId: playerId\n    }\n  }\n}\n\n/**\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link PLAYER_REJECTED} action object\n */\nexport function playerRejected (gameId, playerId) {\n  return (dispatch) => {\n    return new Promise((resolve, reject) => {\n      dispatch(removePlayer(gameId, playerId))\n      dispatch(getNewPlayer(gameId))\n      resolve()\n    })\n  }\n  // return {\n  //   type: PLAYER_REJECTED,\n  //   payload: {\n  //     player: id\n  //   }\n  // }\n}\n\n/**\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link REMOVE_PLAYER} action object\n */\nexport function removePlayer (gameId, playerId) {\n  return {\n    type: REMOVE_PLAYER,\n    payload: {\n      gameId: gameId,\n      playerId: playerId\n    }\n  }\n}\n\n/**\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link GET_NEW_PLAYER} action object\n */\nexport function getNewPlayer (id) {\n  console.log('getting new player')\n  return {\n    type: GET_NEW_PLAYER,\n    payload: {\n      gameId: id\n    }\n  }\n}\n\n/**\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link GET_NEW_PLAYER} action object\n */\nexport function addNewPlayer (gameId, playerId) {\n  return {\n    type: ADD_NEW_PLAYER,\n    payload: {\n      gameId: gameId,\n      playerId: playerId\n    }\n  }\n}\n\n/* =====  End of Action creators  ======*/\n\nfunction getRandomPlayersIds (range) {\n  var rand = (_.first(_.shuffle(_.range(range)), 3))\n  console.log(rand)\n  return rand\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/areas/games/actions.js\n **/","module.exports = require(\"underscore\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 12\n ** module chunks = 0\n **/","import SlackBotService from './slack-bot'\nimport DBService from './db-service'\n\nlet Services = {\n  SlackBot: new SlackBotService(),\n  Mongo: new DBService()\n}\n\nexport default Services\n\nexport function bootServices (config) {\n  var promises = []\n  Object.keys(config).forEach((key) => {\n    if (config[key].enabled) {\n      if (Services[key] && Services[key].boot !== 'undefined ') {\n        console.log(`\\tBooting up ${key} service`)\n        try {\n          promises.push(Services[key].boot(config[key]))\n        } catch (e) {\n          console.log(e)\n        }\n      } else {\n        throw new Error(`${key} service is not defined`)\n      }\n    }\n  })\n\n  return Promise.all(promises)\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/common/services/index.js\n **/","import Botkit from 'botkit'\nimport _ from 'underscore'\n\nclass SlackBot {\n  boot (config) {\n    return new Promise((resolve, reject) => {\n      this.controller = Botkit.slackbot({\n        debug: false\n      })\n      this.controller.spawn({\n        token: config.token\n      }).startRTM((err, bot, slackResponse) => {\n        if (err) {\n          throw new Error(err)\n        }\n        this.cacheTeamData(slackResponse)\n        this.registerBot(bot)\n        resolve(slackResponse)\n      })\n    })\n  }\n\n  cacheTeamData (data) {\n    this.team = {\n      users: data.users,\n      channels: _.map(data.channels, (channel) => { return channel.id }),\n      groups: _.map(data.groups, (group) => { return group.id })\n    }\n  }\n\n  registerBot (bot) {\n    this.bot = bot\n    this.id = bot.identity.id\n  }\n\n  isGroup (id) {\n    return _.indexOf(this.team.groups, id) > -1\n  }\n\n  isChannel (id) {\n    return _.indexOf(this.team.channels, id) > -1\n  }\n\n  getContext (id) {\n    var ctx = {}\n\n    if (this.isGroup(id)) {\n      ctx = {\n        ctx: this.bot.api.groups,\n        name: 'group'\n      }\n    } else {\n      ctx = {\n        ctx: this.bot.api.channels,\n        name: 'channel'\n      }\n    }\n\n    return ctx\n  }\n}\n\nexport default SlackBot\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/common/services/slack-bot/slack-bot.js\n **/","module.exports = require(\"botkit\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"botkit\"\n ** module id = 15\n ** module chunks = 0\n **/","import { MongoClient } from 'mongodb'\n\nclass DBService {\n  boot (config) {\n    return new Promise((resolve, reject) => {\n      MongoClient.connect(config.url + config.dbName, (err, db) => {\n        if (err) {\n          console.error('Connection failed', err)\n          reject(err)\n        }\n        console.log('DB connection successful')\n        this.registerDbConnection(db)\n        resolve(db)\n      })\n    })\n  }\n\n  registerDbConnection (db) {\n    this.db = db\n    this.db.collection('tests').insert({'message': 'message from app'}, (err, res) => {\n      if (err) {\n        console.error(err)\n      } else {\n        console.log(res)\n      }\n    })\n  }\n}\n\nexport default DBService\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/common/services/db-service/db-service.js\n **/","module.exports = require(\"mongodb\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mongodb\"\n ** module id = 17\n ** module chunks = 0\n **/","'use strict'\n\n/*=======================================\n=              Action types             =\n=======================================*/\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const REGISTER_PLAYERS = 'REGISTER_PLAYERS'\n\n/* =====  End of Action types  ======*/\n\n/*=======================================\n=            Action creators            =\n=======================================*/\n\n/** @module players/actions */\n\n/**\n * @todo Implement action creators for this area\n *\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link REGISTER_PLAYERS} action object\n */\nexport function getPlayers (payload) {\n  return {\n    type: REGISTER_PLAYERS,\n    payload\n  }\n}\n\n/* =====  End of Action creators  ======*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/areas/players/actions.js\n **/","'use strict'\n\n/*=======================================\n=              Action types             =\n=======================================*/\n/**\n * @todo Define action types for this area\n *\n * [Action name] action type\n * @constant\n * @type {[type]}\n */\nexport const UPDATE_STATUS = 'UPDATE_STATUS'\n\n/* =====  End of Action types  ======*/\n\n/*=======================================\n=            Action creators            =\n=======================================*/\n\n/** @module status/actions */\n\n/**\n * @todo Implement action creators for this area\n *\n * [Action name] action creator\n * @param {[type]} payload [description]\n * @return {@link UPDATE_STATUS} action object\n */\nexport function updateStatus (payload) {\n  console.log('Updating status')\n  return {\n    type: UPDATE_STATUS,\n    payload\n  }\n}\n\n/* =====  End of Action creators  ======*/\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/areas/status/actions.js\n **/","/** @module status/reducer */\n\n'use strict'\n\nimport * as statusActions from './actions'\n\n/**\n * @todo Update state type and default value to reflect your model\n * @todo Implement reducer\n *\n * Status reducer\n * @param  {[type]}  state  - current state to be reduced\n * @param  {Object} action - action to be performed on current state\n * @param  {string} action.type - {@link UPDATE_STATUS|UPDATE_STATUS}, ...\n * @return {[type]} - array representing new state\n */\nexport function status (state = { status: 'idle' }, action) {\n  switch (action.type) {\n    case statusActions.UPDATE_STATUS:\n      return Object.assign({}, state, action.payload)\n    default:\n      return state\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/areas/status/reducer.js\n **/","import { createStore, applyMiddleware, compose } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport reducers from '../reducers'\n\nconst storeEnhancers = compose(applyMiddleware(thunkMiddleware))\n\nfunction setupStore (initialState) {\n  return createStore(reducers, initialState, storeEnhancers)\n}\n\nexport default setupStore\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/config/store/configStore.prod.js\n **/","import Services from '../../common/services'\nimport GameService from '../../common/services/game-service'\nimport Ticker from '../ticker'\nimport { getStore, getState, dispatch } from '../../app'\nimport * as messageActions from '../../areas/messages/actions'\nimport * as playersActions from '../../areas/players/actions'\nimport * as gamesActions from '../../areas/games/actions'\nimport * as statusActions from '../../areas/status/actions'\nimport KeywordsConfig from './config.js'\nimport CommandHandlers from './command-handlers.js'\nimport _ from 'underscore'\n\nclass RBot {\n  constructor () {\n    this.ticker = new Ticker()\n    this.gameStatusTicker = this.ticker.every(5000).do(CommandHandlers.periodicEventsHandler)\n\n    this.initializeListeners()\n  }\n\n  initializeListeners () {\n    Services.SlackBot.controller.on('direct_mention', CommandHandlers.directMentionHandler)\n\n    KeywordsConfig.forEach((v, k) => {\n      var handlerName = this.getHandlerName(k)\n      console.log(CommandHandlers[handlerName])\n      Services.SlackBot.controller.hears(v.phrases, v.triggers, CommandHandlers[handlerName])\n    })\n  }\n\n  getHandlerName (capitalizedKeyword) {\n    var keyword = capitalizedKeyword.toLowerCase().split('_')\n\n    return (_.first(keyword).concat(_.map(_.rest(keyword), (word) => {\n      return word.charAt(0).toUpperCase() + word.slice(1)\n    }))).concat('Handler')\n  }\n}\n\nexport default RBot\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/components/bot/index.js\n **/","import _ from 'underscore'\nimport shortid from 'shortid'\nimport { getState } from '../../../app'\n\nclass GameService {\n  createId () {\n    return shortid.generate()\n  }\n\n  getStatus () {\n    return getState().status.status\n  }\n\n  getGame (id) {\n    return getState().games[id]\n  }\n\n  getCurrentGame () {\n    return getState().games[this.getCurrentGameId()]\n  }\n\n  getCurrentGameOrganizer () {\n    return this.getCurrentGame() ? this.getCurrentGame().meta.organizer : undefined\n  }\n\n  getCurrentGamePlayers () {\n    return this.getCurrentGame() ? this.getCurrentGame().players : undefined\n  }\n\n  getCurrentGameId () {\n    return getState().status.gameId\n  }\n\n  getCurrentGameCreationTime () {\n    return this.getMeta(this.getCurrentGameId()).createdAt\n  }\n\n  getCurrentGameStartTime () {\n    return this.getMeta(this.getCurrentGameId()).startedAt\n  }\n\n  getCurrentGameTime () {\n    return Math.floor((Date.now() - this.getCurrentGameStartTime()) / 1000)\n  }\n\n  getCurrentGameElapsedTime () {\n    return 16 - Math.ceil(this.getCurrentGameTime() / 60)\n  }\n\n  getMeta (id) {\n    return getState().games[id].meta\n  }\n\n  getOrganizer (id) {\n    return getState().games[id].meta.organizer\n  }\n\n  getPlayers (id) {\n    return getState().games[id].players\n  }\n\n  getRecentlyAddedPlayer (id) {\n    return _.last(getState().games[id].players.pending)\n  }\n\n  getAvailablePlayers (id) {\n    return getState().games[id].players.available\n  }\n\n  getPendingPlayers (id) {\n    return getState().games[id].players.pending\n  }\n\n  getRejectedPlayers (id) {\n    return getState().games[id].players.rejected\n  }\n\n  getAcceptedPlayers (id) {\n    return getState().games[id].players.accepted\n  }\n\n  countAvailablePlayers (id) {\n    return getState().games[id].players.available.length\n  }\n\n  countAcceptedPlayers (id) {\n    return getState().games[id].players.accepted.length\n  }\n\n  isOrganizedBy (id) {\n    return this.getCurrentGameOrganizer() === id\n  }\n\n  isUserInvited (id) {\n    return this.getCurrentGame() && _.indexOf(this.getCurrentGamePlayers().pending, id) > -1\n  }\n\n  hasUserAccepted (id) {\n    return this.getCurrentGame() && _.indexOf(this.getCurrentGamePlayers().accepted, id) > -1\n  }\n\n  isIdle () {\n    return this.getStatus() === 'idle'\n  }\n\n  isPending () {\n    return this.getStatus() === 'pending'\n  }\n\n  isOccupied () {\n    return this.getStatus() === 'occupied'\n  }\n}\nvar gameService = new GameService()\n\nexport default gameService\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/common/services/game-service/game-service.js\n **/","module.exports = require(\"shortid\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"shortid\"\n ** module id = 24\n ** module chunks = 0\n **/","import shortid from 'shortid'\n\nclass Ticker {\n  constructor () {\n    this.tickers = {}\n\n    this.every = this.every.bind(this)\n    this.createCallback = this.createCallback.bind(this)\n    this.do = this.do.bind(this)\n    this.remove = this.remove.bind(this)\n  }\n\n  every (interval) {\n    return this.createCallback(shortid.generate(), interval)\n  }\n\n  createCallback (id, interval) {\n    return {\n      id: id,\n      do: (callback) => {\n        this.do(id, interval, callback)\n        return id\n      }\n    }\n  }\n\n  do (id, interval, callback) {\n    if (this.tickers[id] === undefined) {\n      console.log('Setting ticker ', id)\n      this.tickers[id] = setInterval(callback, interval)\n      console.log('Returning ', id)\n      return id\n    } else {\n      console.log('Ticker is defined')\n    }\n\n    throw new TypeError('Ticker of this id is already defined')\n  }\n\n  remove (id) {\n    console.log('Removing ticker ', id)\n    if (this.tickers[id] !== undefined) {\n      clearInterval(this.tickers[id])\n      delete this.tickers[id]\n      return true\n    }\n    throw new TypeError('Ticker is not defined')\n  }\n}\n\nexport default Ticker\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/components/ticker/ticker.js\n **/","var RBotConfig = new Map()\n\nRBotConfig.set('START_GAME', {\n  phrases: ['let\\'s', 'do it', 'zagrajmy', 'it\\'s', 'time', '!', 'gramy'],\n  triggers: ['direct_mention', 'mention']\n})\n\nRBotConfig.set('CONFIRM_GAME', {\n  phrases: ['^ok$', '^yes$'],\n  triggers: ['direct_mention', 'mention']\n})\n\nRBotConfig.set('REJECT_GAME', {\n  phrases: ['^no$', '^spierdalaj$'],\n  triggers: ['direct_mention', 'mention']\n})\n\nRBotConfig.set('CANCEL_GAME', {\n  phrases: ['^fuck it$', '^cancel$'],\n  triggers: ['direct_mention', 'mention']\n})\n\nRBotConfig.set('GET_STATUS', {\n  phrases: ['^status$', '^what\\'s up$'],\n  triggers: ['direct_mention', 'mention']\n})\n\nRBotConfig.set('GET_HELP', {\n  phrases: ['^help$', '^hello$'],\n  triggers: ['direct_mention', 'mention']\n})\n\nRBotConfig.set('PING', {\n  phrases: ['^ping$'],\n  triggers: ['direct_mention', 'mention']\n})\n\nRBotConfig.set('CONSOLE_LOG', {\n  phrases: ['^whip it$'],\n  triggers: ['direct_mention', 'mention']\n})\n\nexport default RBotConfig\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/components/bot/config.js\n **/","import Services from '../../common/services'\nimport GameService from '../../common/services/game-service'\nimport { getStore, getState, dispatch } from '../../app'\nimport * as messageActions from '../../areas/messages/actions'\nimport * as playersActions from '../../areas/players/actions'\nimport * as gamesActions from '../../areas/games/actions'\nimport * as statusActions from '../../areas/status/actions'\nimport _ from 'underscore'\n\nfunction directMentionHandler (bot, msg) {\n  dispatch(messageActions.receivedMessage(msg))\n\n  if (msg.text === '' || msg.text === ':') {\n    bot.reply(msg, 'Well, try `@ryszard hello` to get some help <@' + msg.user + '>')\n  }\n}\n\nfunction startGameHandler (bot, msg) {\n  let id = GameService.createId()\n\n  if (GameService.isIdle()) {\n    dispatch(gamesActions.createGame(id, msg.channel, msg.user, Date.now()))\n      .then((response) => {\n        bot.reply(msg, `${getPlayersString(GameService.getPendingPlayers(id))} do you wanna play?`)\n      })\n  } else if (GameService.isPending()) {\n    bot.reply(msg, '_There is a game I\\'m organizing right now. Come back later :)_')\n  } else {\n    bot.reply(msg, `_Sorry, there is a game going on right now... It will take ~${GameService.getCurrentGameElapsedTime()}min _`) // eslint-disable-line\n  }\n}\n\nfunction confirmGameHandler (bot, msg) {\n  let game = GameService.getCurrentGame()\n  let reply = 'Cool, great you have joined!'\n\n  if (GameService.isIdle()) {\n    bot.reply(msg, '_No game going on right now! You can always start a new one!_')\n    return\n  }\n\n  if (GameService.isOrganizedBy(msg.user)) {\n    reply = '_Sorry, you are the organizer, you have already accepted..._'\n    bot.reply(msg, reply)\n    return false\n  }\n\n  if (GameService.hasUserAccepted(msg.user)) {\n    bot.reply(msg, '_You have already joined this game_')\n    return false\n  }\n\n  if (!GameService.isUserInvited(msg.user)) {\n    bot.reply(msg, '_Sorry, you are not invited to this game_')\n    return false\n  }\n\n  if (GameService.isPending()) {\n    dispatch(gamesActions.playerAccepted(GameService.getCurrentGameId(), msg.user))\n  }\n\n  bot.reply(msg, reply)\n\n  return this.gameStatusHandler(msg)\n}\n\nfunction rejectGameHandler (bot, msg) {\n  let game = GameService.getCurrentGame()\n  let gameId = GameService.getCurrentGameId()\n  let reply = ''\n\n  if (typeof game === 'undefined') {\n    bot.reply(msg, '_Say what? No to what?!_')\n    return\n  }\n\n  if (GameService.isIdle()) {\n    bot.reply('_Aaaaaaa, w00t?! `@ryszard help`_')\n    return\n  }\n  if (GameService.isOrganizedBy(msg.user)) {\n    bot.reply(msg, '_You are the organizer, you can only cancel a game:_ `@ryszard cancel`')\n    return\n  }\n\n  if (GameService.isPending() && GameService.countAvailablePlayers(gameId) > 0) {\n    dispatch(gamesActions.playerRejected(gameId, msg.user))\n      .then(() => {\n          bot.reply(msg, `<@${msg.user}> rejected.\\n*<@${GameService.getRecentlyAddedPlayer(gameId)}> what about you?*`) // eslint-disable-line\n      })\n    return\n  } else {\n    reply = `<@${msg.user}> was the last one available. Try again later!`\n    dispatch(statusActions.updateStatus({\n      gameId: 1,\n      status: 'idle'\n    }))\n  }\n\n  bot.reply(msg, reply)\n}\n\nfunction cancelGameHandler (bot, message) {\n  if (GameService.isIdle()) {\n    bot.reply(message, '_Cancel w00t?!_')\n    return\n  }\n  bot.reply(message, '_All right, maybe next time..._')\n  dispatch(statusActions.updateStatus({\n    gameId: -1,\n    status: 'idle'\n  }))\n}\n\nfunction getStatusHandler (bot, msg) {\n  let organizer = GameService.getCurrentGameOrganizer()\n  let players = GameService.getCurrentGamePlayers()\n  let reply\n\n  if (GameService.isIdle()) {\n    bot.reply(msg, '_There is no game going on now. You can start one:) Need some help?_ `@ryszard help`') // eslint-disable-line\n    return\n  }\n\n  if (GameService.isPending()) {\n    reply = {\n      'text': `*There is a pending game requested by <@${organizer}>*`,\n      'attachments': []\n    }\n    if (players.pending.length > 0) {\n      reply.attachments.push({\n        'color': '#0000ff',\n        'text': `Pending players: ${getPlayersString(players.pending)}`\n      })\n    }\n\n    if (players.accepted.length > 0) {\n      reply.attachments.push({\n        'color': '#00ff00',\n        'text': `Accepted players: ${getPlayersString(players.accepted)}`\n      })\n    }\n\n    if (players.rejected.length > 0) {\n      reply.attachments.push({\n        'color': '#ff0000',\n        'text': `Rejected players: ${getPlayersString(players.rejected)}`\n      })\n    }\n  }\n\n  if (GameService.isOccupied()) {\n    reply = {\n      'text': `*There is a game going on requested by <@${organizer}>*`,\n      'attachments': []\n    }\n\n    reply.attachments.push({\n      'color': '#00ff00',\n      'text': `Accepted players: ${getPlayersString(players)}`\n    })\n\n    reply.attachments.push({\n      'color': '#0000ff',\n      'text': `Elapsed time: ~${Math.ceil(GameService.getCurrentGameTime() / 60)} min`\n    })\n  }\n  bot.reply(msg, reply)\n}\n\nfunction periodicEventsHandler () {\n  if (GameService.getStatus() === 'occupied' && GameService.getCurrentGameTime() > 15 * 60) {\n    dispatch(statusActions.updateStatus({\n      gameId: -1,\n      status: 'idle'\n    }))\n    console.log('All right, its time for a new game...')\n  }\n}\n\nfunction gameStatusHandler (message) {\n  let players = GameService.getCurrentGamePlayers()\n\n  if (typeof players === 'undefined') {\n    return false\n  }\n\n  if (players.accepted.length === 4) {\n    let playersString = getPlayersString(players.accepted)\n\n    Services.SlackBot.bot.reply(message, playersString + ' let\\'s play!')\n    dispatch(gamesActions.startGame(GameService.getCurrentGameId(), Date.now()))\n    dispatch(statusActions.updateStatus({\n      gameId: GameService.getCurrentGameId(),\n      status: 'occupied'\n    }))\n\n    return true\n  } else {\n    console.log(`Waiting for  ${players.pending.length} players ...`)\n    return false\n  }\n}\n\nfunction pingHandler (bot, message) {\n  if (GameService.isPending()) {\n    let reply = 'One shall answer when asked '\n    reply += `${getPlayersString(GameService.getCurrentGamePlayers().pending)}!`\n    bot.reply(message, reply)\n  } else {\n    bot.reply(message, '_Ping yourself, there is no one I could ping..._')\n  }\n}\n\nfunction getHelpHandler (bot, message) {\n    /* eslint-disable max-len */\n  var reply = \"_Hi, I'm *Ryszard* and I will organize a foosball team for you :heart:_ \\n\\n\"\n  reply += '_Let me introduce you to the language I speak:_\\n'\n  reply += '=====================:heart::soccer::heart:=====================\\n'\n  reply += \"`@ryszard let's do it`, `@ryszard it's time` `@ryszard gramy` - _that's how you tell me that you are looking for a team. I'll as random 3 ppl if they want to play_\\n\"\n  reply += '`@ryszard ok` _if you are willing to play_\\n'\n  reply += \"`@ryszard no` _if you don't want to play. I'll try to ask another person if she accepts the challange_\\n\"\n  reply += '`@ryszard cancel` _if you want to cancel your game_\\n'\n  reply += '`@ryszard help`, `@ryszard hello` _if you need some help on how to talk with me_\\n'\n  reply += '`@ryszard status` _if you need to know some details about current game being planned_ \\n'\n  reply += '=====================:heart::soccer::heart:=====================\\n'\n        /* eslint-enable max-len */\n  bot.reply(message, reply)\n}\n\nfunction consoleLogHandler (bot, message) {\n  bot.reply(message, 'Roger!')\n}\n\nfunction getPlayersString (players) {\n  return _.map(players, (player) => {\n    return '<@' + player + '>'\n  }).join(', ')\n}\n\nexport default {\n  directMentionHandler: directMentionHandler,\n  startGameHandler: startGameHandler,\n  confirmGameHandler: confirmGameHandler,\n  rejectGameHandler: rejectGameHandler,\n  cancelGameHandler: cancelGameHandler,\n  getStatusHandler: getStatusHandler,\n  getHelpHandler: getHelpHandler,\n  pingHandler: pingHandler,\n  consoleLogHandler: consoleLogHandler,\n  periodicEventsHandler: periodicEventsHandler\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/components/bot/command-handlers.js\n **/","module.exports = require(\"assert\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"assert\"\n ** module id = 28\n ** module chunks = 0\n **/"],"sourceRoot":""}